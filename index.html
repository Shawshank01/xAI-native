<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xAI Chat Interface</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <button id="darkModeToggle">Toggle Dark Mode</button>
    <h1>Chat with xAI</h1>
    <div id="chat"></div>
    <form id="chatForm">
        <label for="questionInput">Enter your question:</label>
        <textarea id="questionInput" placeholder="e.g., What's the meaning of life?" required></textarea>
        <button type="submit">Send</button>
    </form>
    <div id="response"></div>
    
    <!-- Link to the external JavaScript file -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- For Markdown parsing -->
    <script src="script.js"></script> <!-- Your custom JavaScript -->
    <script>
        function displayMessage(sender, text) {
            const chat = document.getElementById('chat');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'message ' + (sender === 'user' ? 'user' : 'ai');
            msgDiv.textContent = (sender === 'user' ? 'You' : 'AI') + ': ' + text;
            chat.appendChild(msgDiv);
            chat.scrollTop = chat.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('questionInput');
            const text = input.value;
            if (!text) return;

            // Store user message
            let history = JSON.parse(sessionStorage.getItem('conversationHistory')) || [];
            const userMsg = { sender: 'user', text, timestamp: Date.now() };
            history.push(userMsg);
            sessionStorage.setItem('conversationHistory', JSON.stringify(history));
            displayMessage('user', text);

            // Simulate AI response (replace with real AI call)
            setTimeout(() => {
                const aiText = 'AI response to: ' + text;
                const aiMsg = { sender: 'ai', text: aiText, timestamp: Date.now() };
                history.push(aiMsg);
                sessionStorage.setItem('conversationHistory', JSON.stringify(history));
                displayMessage('ai', aiText);
            }, 1000);

            input.value = '';
        }

        // On load, display history
        window.onload = function() {
            const history = JSON.parse(sessionStorage.getItem('conversationHistory')) || [];
            history.forEach(msg => displayMessage(msg.sender, msg.text));
        };

        document.getElementById('darkModeToggle').onclick = function() {
            document.body.classList.toggle('dark-mode');
        };
    </script>
</body>
</html>